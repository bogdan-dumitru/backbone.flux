(function(){Backbone.Flux={Mixins:{}}}).call(this),function(){Backbone.Flux.Store=_.extend(Backbone.Events,{isStore:!0}),Backbone.Flux.ModelStore=_.extend(Backbone.Flux.Store,{models:{},require:function(t){var n;return null!=(n=this.models)[t]?n[t]:n[t]=this.loadModel(t)},loadModel:function(t){var n;if(!this.model)throw"Model not specified on store";return n=new this.model({id:t}),n.fetch(),n.on("all",function(e){return function(r){var o,i;return i=""+t+":"+r,(o=/change:(.*)/.exec(r))?e.trigger(i,n.get(o[1])):e.trigger(i)}}(this)),n},update:function(t,n){return this.models[t].save(n,{patch:!0,success:function(e){return function(){var r,o,i;for(r in n)o=n[r],e.trigger(""+t+":update:"+r+":success");i=[];for(r in n)o=n[r],i.push(e.trigger(""+t+":update:success"));return i}}(this),error:function(e){return function(){var r,o,i;for(r in n)o=n[r],e.trigger(""+t+":update:"+r+":error");i=[];for(r in n)o=n[r],i.push(e.trigger(""+t+":update:error"));return i}}(this)})}})}.call(this),function(){Backbone.Flux.Mixins.StoreBinding={componentWillMount:function(){return this.bindStoreEventsFor(this.props)},componentWillReceiveProps:function(t){return this.bindStoreEventsFor(t,this.props)},bindStoreEventsFor:function(t,n){var e,r,o,i,s,u,c,a,l,h,f;h=this.storeEvents,f=[];for(l in h)i=h[l],a=this.normaliseStore(l),f.push(function(){var l,h;h=[];for(o in i)s=i[o],l=this.splitActionEvent(o),e=l[0],r=l[1],u=this.normaliseStoreEvent(r,t),void 0!==n?(c=this.normaliseStoreEvent(r,n),u!==c?(a.off(c,this[s]),h.push(a[e](u,this[s]))):h.push(void 0)):h.push(a[e](u,this[s]));return h}.call(this));return f},splitActionEvent:function(t){var n,e,r;return r=t.split(" "),n=r[0],e=r[1],_.present(e)||(e=n,n="on"),[n,e]},normaliseStore:function(t){var n;if(n=_.inject(t.split("."),function(t,n){return t[n]||{}},window),n.isStore===!1)throw"Storekey "+t+" does not seam to point to a store.";return n},normaliseStoreEvent:function(t,n){var e;return e=t.split(":"),_.map(e,function(t){var e,r;if(e=/<(.*)>/.exec(t)){if(r=e[1],!(r in n))throw"Event segment must be a part of the properties";return n[r]}return t}).join(":")}}}.call(this);